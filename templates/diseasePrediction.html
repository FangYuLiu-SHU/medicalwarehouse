<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <title>病症预测页面</title>
<style type="text/css">
.file {
    display: inline-block;
    height: 38px;
    line-height: 38px;
    padding: 0 18px;
    background-color: #1E9FFF;
    color: #fff;
    white-space: nowrap;
    text-align: center;
    font-size: 14px;
    border: none;
    border-radius: 2px;
    cursor: pointer;

    /*position: relative;*/
    /*overflow: hidden;*/
    /*text-decoration: none;*/
    /*text-indent: 0;*/
}
.file input {
    position: absolute;
    font-size: 100px;
    right: 0;
    top: 0;
    opacity: 0;
}
.file:hover {
    background: #78C3F3;
    border-color: #78C3F3;
    color: #004974;
    text-decoration: none;
}
</style>
    <link rel="stylesheet" href="../static/layui/css/layui.css"/>
    <script src="../static/js/jquery.js"></script>
  </head>
  <body>
      <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
        <ul class="layui-tab-title">
          <li class="layui-this">脉象预测</li>
          <li>脉象预测准确率展示</li>
          <li>舌象预测</li>
          <li>舌象预测准确率展示</li>
          <li>肾象预测</li>
          <li>肾象预测准确率展示</li>
          <li>肝象预测</li>
          <li>肝象预测准确率展示</li>
          <li>肺象预测</li>
          <li>肺象预测准确率展示</li>
        </ul>
        <div class="layui-tab-content" style="height: 100px;">
          <div class="layui-tab-item layui-show">
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 15px;">
              <legend>输入病人的各项指标</legend>
            </fieldset>
            <form name="myForm" id="form1" class="layui-form layui-form-pane" action="##" onsubmit="return false" method="post" lay-filter="forecastInformation"
                  enctype='multipart/form-data'>

              <div class="layui-form-item" pane="">
                <label class="layui-form-label">性别</label>
                <div class="layui-input-block">
                  <input type="radio" name="sex" value="男" title="男" checked="">
                  <input type="radio" name="sex" value="女" title="女">
                  <!--<input type="radio" name="sex" value="禁" title="禁用" disabled="">-->
                </div>
              </div>

              <div class="layui-form-item">
                <div class="layui-inline">
                  <label class="layui-form-label">年龄</label>
                  <div class="layui-input-inline">
                    <input type="text" name="userage" lay-verify="userAge" autocomplete="off" placeholder="请输入年龄" class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <label class="layui-form-label">分期</label>
                  <div class="layui-input-inline">
                    <input type="text" name="stage" autocomplete="off" placeholder="请输入分期" class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <label class="layui-form-label">血肌酐</label>
                  <div class="layui-input-inline">
                    <input type="text" name="bloodCreatinine" autocomplete="off" placeholder="请输入血肌酐指标"
                           lay-verify="userBloodCreatinine" class="layui-input">
                  </div>
                </div>
              </div>

              <div class="layui-form-item">
                <div class="layui-inline">
                  <label class="layui-form-label">eGFR值</label>
                  <div class="layui-input-inline">
                    <input type="text" name="egfr" lay-verify="required" lay-reqtext="eGFR值不能为空" autocomplete="off"
                           placeholder="请先计算eGFR值" class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <button type="button" class="layui-btn layui-btn-normal" id="LAY-component-form-egfr">计算eGFR值</button>
                </div>
              </div>

              <div class="layui-form-item">
                <div class="layui-inline">
                  <label class="layui-form-label">脉波表格</label>
                  <div class="layui-input-inline">
                    <input type="text" name="fileName" id="selectFileName" lay-verify="fileName"
                           lay-reqtext="请先选择脉搏数据文件" autocomplete="off" placeholder="未选择文件" class="layui-input"
                           readonly="readonly">
                  </div>
                </div>
                <div class="layui-inline">
                  <!--					<input type="file" name="pulseFile" class="file">-->
                  <a href="javascript:;" class="file">点击选择文件
                    <input type="file" name="pulseFile" id="selectFile" class="file">
                  </a>
                </div>
              </div>

              <div class="layui-form-item">
                <div class="layui-inline">
                  <label class="layui-form-label">脉象类型</label>
                  <div class="layui-input-inline">
                    <input type="text" name="pulseType" id="pulseType" autocomplete="off" placeholder="预测结果"
                           class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <button class="layui-btn" id="commit" lay-submit="*" lay-filter="forecastInformation"
                          id="LAY-component-form-result">脉象类型预测
                  </button>
                </div>
              </div>
            </form>
          </div>     <!--脉象预测-->
          <div class="layui-tab-item">
            <form name="theForm2" id="the_form2" class="layui-form layui-form-pane" action="##" onsubmit="return false"
                  method="post" lay-filter="selectNumber" enctype='multipart/form-data'>
              <div class="layui-form-item">
                <label class="layui-form-label">验证人数</label>
                <div class="layui-input-inline">
                  <select name="selectNumber" lay-verify="required" lay-filter="selectNum" class="select">
                    <option value="50" selected="selected">50</option>
                    <option value="100">100</option>
                    <option value="200">200</option>
                  </select>
                </div>
              </div>
            </form>
            <div id="pulsePredictChartDom" style="width: 30%; height: 500%;float: left"></div><!--症状统计-->
            <div id="pulsePredictChartBar" style="width: 70%; height: 500%;float: right"></div><!--验证详情-->
            <div id="pulsePredictDisplay" style="width: 30%; float: left;text-align: center;"></div><!--准确率显示-->
          </div>                <!--脉象预测准确率展示-->
          <div class="layui-tab-item">内容3</div>         <!--舌象预测-->
          <div class="layui-tab-item">内容4</div>         <!--舌象预测准确率展示-->
          <div class="layui-tab-item">
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 15px;">
              <legend>输入病人的各项指标</legend>
            </fieldset>
            <form name="myForm3" id="form3" class="layui-form layui-form-pane" action="##" onsubmit="return false" method="post" lay-filter="forecastInformation3"
                  enctype='multipart/form-data'>

              <div class="layui-form-item" pane="">
                <label class="layui-form-label">性别</label>
                <div class="layui-input-block">
                  <input type="radio" name="sex" value="男" title="男" checked="">
                  <input type="radio" name="sex" value="女" title="女">
                  <!--<input type="radio" name="sex" value="禁" title="禁用" disabled="">-->
                </div>
              </div>

              <div class="layui-form-item">
                <div class="layui-inline">
                  <label class="layui-form-label">年龄</label>
                  <div class="layui-input-inline">
                    <input type="text" name="userage" lay-verify="userAge" autocomplete="off" placeholder="请输入年龄" class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <label class="layui-form-label">分期</label>
                  <div class="layui-input-inline">
                    <input type="text" name="stage" autocomplete="off" placeholder="请输入分期" class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <label class="layui-form-label">血肌酐</label>
                  <div class="layui-input-inline">
                    <input type="text" name="bloodCreatinine" autocomplete="off" placeholder="请输入血肌酐指标"
                           lay-verify="userBloodCreatinine" class="layui-input">
                  </div>
                </div>
              </div>

              <div class="layui-form-item">
                <label class="layui-form-label">舌象症状</label>
                <div class="layui-input-block">
                  <input type="text" name="tongueSymptoms" lay-verify="required" lay-reqtext="请输入舌象症状" placeholder="请输入舌象症状" autocomplete="off" class="layui-input">
                </div>
              </div>

              <div class="layui-form-item">
                <label class="layui-form-label">脉象症状</label>
                <div class="layui-input-block">
                  <input type="text" name="pulseSymptoms" lay-verify="required" lay-reqtext="请输入脉象症状" placeholder="请输入脉象症状" autocomplete="off" class="layui-input">
                </div>
              </div>

              <div class="layui-form-item">
                <div class="layui-inline">
                  <label class="layui-form-label">eGFR值</label>
                  <div class="layui-input-inline">
                    <input type="text" name="egfr" lay-verify="required" lay-reqtext="eGFR值不能为空" autocomplete="off"
                           placeholder="请先计算eGFR值" class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <button type="button" class="layui-btn layui-btn-normal" id="LAY-component-form-egfr3">计算eGFR值</button>
                </div>
              </div>

              <div class="layui-form-item">
                <div class="layui-inline">
                  <label class="layui-form-label">肾象类型</label>
                  <div class="layui-input-inline">
                    <input type="text" name="kindneyType" id="kindneyType" autocomplete="off" placeholder="预测结果"
                           class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <button class="layui-btn" id="commit3" lay-submit="*" lay-filter="forecastInformation3"
                          id="LAY-component-form-result3">肾象类型预测
                  </button>
                </div>
              </div>
            </form>
          </div>                <!--肾象预测-->
          <div class="layui-tab-item">
            <form name="theForm3" id="the_form3" class="layui-form layui-form-pane" action="##" onsubmit="return false"
                  method="post" lay-filter="selectKindneyNumber" enctype='multipart/form-data'>
              <div class="layui-form-item">
                <label class="layui-form-label">验证表格数</label>
                <div class="layui-input-inline">
                  <select name="selectKindneyNumber" lay-verify="required" lay-filter="selectKindneyNum" class="select">
                    <option value="50" selected="selected">50</option>
                    <option value="100">100</option>
                    <option value="200">200</option>
                  </select>
                </div>
              </div>
            </form>
            <div id="kindneyPredictChartDom" style="width: 30%; height: 500%;float: left"></div><!--症状统计-->
            <div id="kindneyPredictChartBar" style="width: 70%; height: 500%;float: right"></div><!--验证详情-->
            <div id="kindneyPredictDisplay" style="width: 30%; float: left;text-align: center;"></div><!--准确率显示-->
          </div>                <!--肾象预测准确率展示-->
          <div class="layui-tab-item">
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 15px;">
              <legend>输入病人的各项指标</legend>
            </fieldset>
            <form name="myForm4" id="form4" class="layui-form layui-form-pane" action="##" onsubmit="return false" method="post" lay-filter="forecastInformation4"
                  enctype='multipart/form-data'>

              <div class="layui-form-item" pane="">
                <label class="layui-form-label">性别</label>
                <div class="layui-input-block">
                  <input type="radio" name="sex" value="男" title="男" checked="">
                  <input type="radio" name="sex" value="女" title="女">
                  <!--<input type="radio" name="sex" value="禁" title="禁用" disabled="">-->
                </div>
              </div>

              <div class="layui-form-item">
                <div class="layui-inline">
                  <label class="layui-form-label">年龄</label>
                  <div class="layui-input-inline">
                    <input type="text" name="userage" lay-verify="userAge" autocomplete="off" placeholder="请输入年龄" class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <label class="layui-form-label">ALT</label>
                  <div class="layui-input-inline">
                    <input type="text" name="alt" autocomplete="off" placeholder="请输入ALT指标" lay-verify="verify_alt" class="layui-input">
                  </div>
                </div>
              </div>

              <div class="layui-form-item">
                <label class="layui-form-label">舌象症状</label>
                <div class="layui-input-block">
                  <input type="text" name="tongueSymptoms" lay-verify="required" lay-reqtext="请输入舌象症状" placeholder="请输入舌象症状" autocomplete="off" class="layui-input">
                </div>
              </div>

              <div class="layui-form-item">
                <label class="layui-form-label">脉象症状</label>
                <div class="layui-input-block">
                  <input type="text" name="pulseSymptoms" lay-verify="required" lay-reqtext="请输入脉象症状" placeholder="请输入脉象症状" autocomplete="off" class="layui-input">
                </div>
              </div>

              <div class="layui-form-item">
                <div class="layui-inline">
                  <label class="layui-form-label">肝象类型</label>
                  <div class="layui-input-inline">
                    <input type="text" name="liverType" id="liverType" autocomplete="off" placeholder="预测结果"
                           class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <button class="layui-btn" id="commit4" lay-submit="*" lay-filter="forecastInformation4"
                          id="LAY-component-form-result4">肝象类型预测
                  </button>
                </div>
              </div>
            </form>
          </div>                <!--肝象预测-->
          <div class="layui-tab-item">
            <form name="theForm4" id="the_form4" class="layui-form layui-form-pane" action="##" onsubmit="return false"
                  method="post" lay-filter="selectLiverNumber" enctype='multipart/form-data'>
              <div class="layui-form-item">
                <label class="layui-form-label">验证人数</label>
                <div class="layui-input-inline">
                  <select name="selectLiverNumber" lay-verify="required" lay-filter="selectLiverNum" class="select">
                    <option value="50" selected="selected">50</option>
                    <option value="100">100</option>
                    <option value="150">150</option>
                  </select>
                </div>
              </div>
            </form>
            <div id="liverPredictChartDom" style="width: 30%; height: 500%;float: left"></div><!--症状统计-->
            <div id="liverPredictChartBar" style="width: 70%; height: 500%;float: right"></div><!--验证详情-->
            <div id="liverPredictDisplay" style="width: 30%; float: left;text-align: center;"></div><!--准确率显示-->
          </div>                <!--肝象预测准确率展示-->
          <div class="layui-tab-item">
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 15px;">
              <legend>输入病人的各项指标</legend>
            </fieldset>
            <form name="myForm5" id="form5" class="layui-form layui-form-pane" action="##" onsubmit="return false" method="post" lay-filter="forecastInformation5"
                  enctype='multipart/form-data'>

              <div class="layui-form-item" pane="">
                <label class="layui-form-label">性别</label>
                <div class="layui-input-block">
                  <input type="radio" name="sex" value="男" title="男" checked="">
                  <input type="radio" name="sex" value="女" title="女">
                  <!--<input type="radio" name="sex" value="禁" title="禁用" disabled="">-->
                </div>
              </div>

              <div class="layui-form-item">
                <div class="layui-inline">
                  <label class="layui-form-label">年龄</label>
                  <div class="layui-input-inline">
                    <input type="text" name="userage" lay-verify="userAge" autocomplete="off" placeholder="请输入年龄" class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <label class="layui-form-label">FEV1</label>
                  <div class="layui-input-inline">
                    <input type="text" name="FEV1" autocomplete="off" placeholder="请输入FEV1指标"
                           lay-verify="verify_number" class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <label class="layui-form-label">FVC</label>
                  <div class="layui-input-inline">
                    <input type="text" name="FVC" lay-verify="verify_number" autocomplete="off" placeholder="请输入FVC指标" class="layui-input">
                  </div>
                </div>
              </div>

              <div class="layui-form-item">
                <div class="layui-inline">
                  <label class="layui-form-label">FEV1%</label>
                  <div class="layui-input-inline">
                    <input type="text" name="FEV1%" lay-verify="verify_number" autocomplete="off" placeholder="请输入FEV1%指标" class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <label class="layui-form-label">FEV1/FVC</label>
                  <div class="layui-input-inline">
                    <input type="text" name="FEV1/FVC" lay-verify="verify_number" autocomplete="off" placeholder="请输入FEV1/FVC改指标" class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <label class="layui-form-label">PEF</label>
                  <div class="layui-input-inline">
                    <input type="text" name="PEF" lay-verify="verify_number" autocomplete="off" placeholder="请输入PEF指标" class="layui-input">
                  </div>
                </div>
              </div>

              <div class="layui-form-item">
                <label class="layui-form-label">西医诊断</label>
                <div class="layui-input-block">
                  <input type="text" name="wm_diagnosis" lay-verify="required" autocomplete="off" placeholder="请输入西医诊断结果" class="layui-input">
                </div>
              </div>

              <div class="layui-form-item">
                <label class="layui-form-label">舌象症状</label>
                <div class="layui-input-block">
                  <input type="text" name="tongueSymptoms" lay-verify="required" lay-reqtext="请输入舌象症状" placeholder="请输入舌象症状" autocomplete="off" class="layui-input">
                </div>
              </div>

              <div class="layui-form-item">
                <label class="layui-form-label">脉象症状</label>
                <div class="layui-input-block">
                  <input type="text" name="pulseSymptoms" lay-verify="required" lay-reqtext="请输入脉象症状" placeholder="请输入脉象症状" autocomplete="off" class="layui-input">
                </div>
              </div>

              <div class="layui-form-item">
                <div class="layui-inline">
                  <label class="layui-form-label">肺象类型</label>
                  <div class="layui-input-inline">
                    <input type="text" name="lungType" id="lungType" autocomplete="off" placeholder="预测结果"
                           class="layui-input">
                  </div>
                </div>
                <div class="layui-inline">
                  <button class="layui-btn" id="commit5" lay-submit="*" lay-filter="forecastInformation5"
                          id="LAY-component-form-result5">肺象类型预测
                  </button>
                </div>
              </div>
            </form>
          </div>                <!--肺象预测-->
          <div class="layui-tab-item">
            <form name="theForm5" id="the_form5" class="layui-form layui-form-pane" action="##" onsubmit="return false"
                  method="post" lay-filter="selectLungNumber" enctype='multipart/form-data'>
              <div class="layui-form-item">
                <label class="layui-form-label">验证人数</label>
                <div class="layui-input-inline">
                  <select name="selectLungNumber" lay-verify="required" lay-filter="selectLungNum" class="select">
                    <option value="50" selected="selected">50</option>
                    <option value="100">100</option>
                    <option value="200">200</option>
                  </select>
                </div>
              </div>
            </form>
            <div class="layui-show-xs-block" style="display: block;">
              <div id="lungPredictChartDom1" style="width: 30%; height: 500%;float: left"></div><!--症状统计-->
              <div id="lungPredictChartBar1" style="width: 70%; height: 500%;float: right"></div><!--验证详情-->
              <div id="lungPredictDisplay1" style="width: 30%; float: left;margin-top: -80px;text-align: center;"></div><!--准确率显示-->
            </div>
            <div class="layui-show-xs-block"  style="display: block;margin-top: 10px;">
              <div id="lungPredictChartDom2" style="width: 30%; height: 500%;float: left"></div><!--症状统计-->
              <div id="lungPredictChartBar2" style="width: 70%; height: 500%;float: right"></div><!--验证详情-->
              <div id="lungPredictDisplay2" style="width: 30%; float: left;margin-top: -80px;text-align: center;"></div><!--准确率显示-->
            </div>
            <div class="layui-show-xs-block"  style="display: block;margin-top: 10px;">
              <div id="lungPredictChartDom3" style="width: 30%; height: 500%;float: left"></div><!--症状统计-->
              <div id="lungPredictChartBar3" style="width: 70%; height: 500%;float: right"></div><!--验证详情-->
              <div id="lungPredictDisplay3" style="width: 30%; float: left;margin-top: -80px;text-align: center;"></div><!--准确率显示-->
            </div>
          </div>        <!--肺象预测准确率展示-->
        </div>
      </div>
    <script src="../static/layui/layui.js"></script>
    <script src="../static/js/jquery.js"></script>
    <script type="text/javascript" src="../static/js/echarts.js"></script>
    <script type="text/javascript" src="../static/js/echarts.min.js"></script>
    <!--脉搏预测子页面js-->
    <script>
    layui.use('element', function(){
      var $ = layui.jquery
      ,element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块
       $('.layui-tab-title').on('click', function(title) {
          if(title.toElement.textContent=="脉象预测准确率展示"){
            layer.load(2);
            $.ajax({
                url: "pulsePrediction_accuracy",
                type: "POST",
                dataType : "json",
                // processData: false,
                // contentType:false,
                // data: $('#form1').serialize(),
                data: {"selectTestNum": "50" },
                success: function (newData) {
                  layer.closeAll('loading');
                  var pulsePredict_dom = document.getElementById('pulsePredictChartDom');
                  var pulsePredict_chart = echarts.init(pulsePredict_dom);
                  var pulsePredict_option={
                    title: {
                        text: '脉象预测验证情况分布',
                        subtext: newData.testNum+'个脉波验证表格',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item'
                    },
                    legend: {
                        orient: 'vertical',
                        left: 'left',
                    },
                    series: [
                        {
                            name: '预测准确率'+newData.accuracy*100+'%',
                            type: 'pie',
                            radius: '60%',
                          label: {
                                normal: {
                                    position:"inner",
                                    show:false,
                                }
                            },
                            data: [
                                {value: newData.num_pos, name: '预测正确' },
                                {value: newData.num_neg, name: '预测错误' },
                            ],
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0,0,0,0.5)'
                                }
                            }
                        }
                    ]
                  };
                  pulsePredict_chart.setOption(pulsePredict_option);

                  var pulsePredict_bar = document.getElementById('pulsePredictChartBar');
                  var pulsePredict_chartBar = echarts.init(pulsePredict_bar);
                  var pulsePredictBar_option = {
                    title: {
                      text: '脉象预测验证',
                      subtext: '验证详情',
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross',
                            label: {
                                backgroundColor: '#283b56'
                            }
                        },
                        formatter : function(params){
                          var a=params[0];
                          var b=params[1];
                          var str='编号：'+a.axisValue;
                          str += '<br /><span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+a.color+'"></span>' + a.seriesName + " : " + a.value + "<br />";
                          str += '<span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+b.color+'"></span>' + b.seriesName + " : " + b.value;
                          return str;
                        }
                    },
                    legend: {
                        data:['预测类别', '标签类别']
                    },
                    dataZoom: {
                        show: false,
                        start: 0,
                        end: 100
                    },
                    xAxis:
                    {
                      name:'脉波表格编号',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: true,
                        data: newData.idSet
                    },
                    yAxis:
                    {
                      name:'脉象类型',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: false,
                        data: ['', '沉细', '细', '弦', '弦细', '滑', '濡']
                    },
                    series: [
                        {
                            name: '标签类别',
                            type: 'line',
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            data: newData.labelType
                        },
                        {
                            name: '预测类别',
                            type: 'line',
                            data: newData.predictType
                        }
                    ]
                  };
                  pulsePredict_chartBar.setOption(pulsePredictBar_option);

                  var pulsePredictDisplay=document.getElementById('pulsePredictDisplay');
                  pulsePredictDisplay.innerHTML='<h2 class="layui-timeline-title"><b>预测准确率：'+newData.accuracy*100+'%</b></h2>';
                },
                error: function () {
                  layer.msg('处理出错！', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
                }
            });
          }
          else if(title.toElement.textContent=="肾象预测准确率展示"){
            layer.load(2);
            $.ajax({
                url: "kindneyPrediction_accuracy",
                type: "POST",
                dataType : "json",
                // processData: false,
                // contentType:false,
                // data: $('#form1').serialize(),
                data: {"selectTestNum": "50" },
                success: function (newData) {
                  layer.closeAll('loading');
                  var pulsePredict_dom = document.getElementById('kindneyPredictChartDom');
                  var pulsePredict_chart = echarts.init(pulsePredict_dom);
                  var pulsePredict_option={
                    title: {
                        text: '肾象预测验证情况分布',
                        subtext: newData.testNum+'个人的肾象验证',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item'
                    },
                    legend: {
                        orient: 'vertical',
                        left: 'left',
                    },
                    series: [
                        {
                            name: '预测准确率'+newData.accuracy*100+'%',
                            type: 'pie',
                            radius: '60%',
                          label: {
                                normal: {
                                    position:"inner",
                                    show:false,
                                }
                            },
                            data: [
                                {value: newData.num_pos, name: '预测正确' },
                                {value: newData.num_neg, name: '预测错误' },
                            ],
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0,0,0,0.5)'
                                }
                            }
                        }
                    ]
                  };
                  pulsePredict_chart.setOption(pulsePredict_option);

                  var pulsePredict_bar = document.getElementById('kindneyPredictChartBar');
                  var pulsePredict_chartBar = echarts.init(pulsePredict_bar);
                  var pulsePredictBar_option = {
                    title: {
                      text: '肾象预测验证',
                      subtext: '验证详情',
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross',
                            label: {
                                backgroundColor: '#283b56'
                            }
                        },
                        formatter : function(params){
                          var a=params[0];
                          var b=params[1];
                          var str='编号：'+a.axisValue;
                          str += '<br /><span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+a.color+'"></span>' + a.seriesName + " : " + a.value + "<br />";
                          str += '<span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+b.color+'"></span>' + b.seriesName + " : " + b.value;
                          return str;
                        }
                    },
                    legend: {
                        data:['预测类别', '标签类别']
                    },
                    dataZoom: {
                        show: false,
                        start: 0,
                        end: 100
                    },
                    xAxis:
                    {
                      name:'被验证者编号',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: true,
                        data: newData.idSet
                    },
                    yAxis:
                    {
                      name:'肾象类型',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: false,
                        data: ['', '肾阳虚', '肾阴虚', '']
                    },
                    series: [
                        {
                            name: '标签类别',
                            type: 'line',
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            data: newData.labelType
                        },
                        {
                            name: '预测类别',
                            type: 'line',
                            data: newData.predictType
                        }
                    ]
                  };
                  pulsePredict_chartBar.setOption(pulsePredictBar_option);

                  var pulsePredictDisplay=document.getElementById('kindneyPredictDisplay');
                  pulsePredictDisplay.innerHTML='<h2 class="layui-timeline-title"><b>预测准确率：'+newData.accuracy*100+'%</b></h2>';
                },
                error: function () {
                  layer.msg('处理出错！', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
                }
            });
          }
          else if(title.toElement.textContent=="肝象预测准确率展示"){
            layer.load(2);
            $.ajax({
                url: "liverPrediction_accuracy",
                type: "POST",
                dataType : "json",
                // processData: false,
                // contentType:false,
                data: {"selectTestNum": "50" },
                success: function (newData) {
                  layer.closeAll('loading');
                  var pulsePredict_dom = document.getElementById('liverPredictChartDom');
                  var pulsePredict_chart = echarts.init(pulsePredict_dom);
                  var pulsePredict_option={
                    title: {
                        text: '肝象预测验证情况分布',
                        subtext: newData.testNum+'个人的肝象验证',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item'
                    },
                    legend: {
                        orient: 'vertical',
                        left: 'left',
                    },
                    series: [
                        {
                            name: '预测准确率'+newData.accuracy*100+'%',
                            type: 'pie',
                            radius: '60%',
                          label: {
                                normal: {
                                    position:"inner",
                                    show:false,
                                }
                            },
                            data: [
                                {value: newData.num_pos, name: '预测正确' },
                                {value: newData.num_neg, name: '预测错误' },
                            ],
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0,0,0,0.5)'
                                }
                            }
                        }
                    ]
                  };
                  pulsePredict_chart.setOption(pulsePredict_option);

                  var pulsePredict_bar = document.getElementById('liverPredictChartBar');
                  var pulsePredict_chartBar = echarts.init(pulsePredict_bar);
                  var pulsePredictBar_option = {
                    title: {
                      text: '肝象预测验证',
                      subtext: '验证详情',
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross',
                            label: {
                                backgroundColor: '#283b56'
                            }
                        },
                        formatter : function(params){
                          var a=params[0];
                          var b=params[1];
                          var str='编号：'+a.axisValue;
                          str += '<br /><span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+a.color+'"></span>' + a.seriesName + " : " + a.value + "<br />";
                          str += '<span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+b.color+'"></span>' + b.seriesName + " : " + b.value;
                          return str;
                        }
                    },
                    legend: {
                        data:['预测类别', '标签类别']
                    },
                    dataZoom: {
                        show: false,
                        start: 0,
                        end: 100
                    },
                    xAxis:
                    {
                      name:'被验证者编号',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: true,
                        data: newData.idSet
                    },
                    yAxis:
                    {
                      name:'肝象类型',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: false,
                        data: ['', '肝胆湿热症', '肝郁脾虚症', '']
                    },
                    series: [
                        {
                            name: '标签类别',
                            type: 'line',
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            data: newData.labelType
                        },
                        {
                            name: '预测类别',
                            type: 'line',
                            data: newData.predictType
                        }
                    ]
                  };
                  pulsePredict_chartBar.setOption(pulsePredictBar_option);

                  var pulsePredictDisplay=document.getElementById('liverPredictDisplay');
                  pulsePredictDisplay.innerHTML='<h2 class="layui-timeline-title"><b>预测准确率：'+newData.accuracy*100.0+'%</b></h2>';
                },
                error: function () {
                  layer.msg('处理出错！', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
                }
            });
          }
          else if(title.toElement.textContent=="肺象预测准确率展示"){
            layer.load(2);
            $.ajax({
                url: "lungPrediction_accuracy",
                type: "POST",
                dataType : "json",
                // processData: false,
                // contentType:false,
                data: {"selectTestNum": "50" },
                success: function (newData) {
                  layer.closeAll('loading');
                  var pulsePredict_dom1 = document.getElementById('lungPredictChartDom1');
                  var pulsePredict_chart1 = echarts.init(pulsePredict_dom1);
                  var pulsePredict_option1={
                    title: {
                        text: '肺气虚预测验证情况分布',
                        subtext: newData.testNum+'个人的肺气虚验证',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item'
                    },
                    legend: {
                        orient: 'vertical',
                        left: 'left',
                    },
                    series: [
                        {
                            name: '预测准确率'+newData.accuracy1*100+'%',
                            type: 'pie',
                            radius: '60%',
                          label: {
                                normal: {
                                    position:"inner",
                                    show:false,
                                }
                            },
                            data: [
                                {value: newData.num_pos1, name: '预测正确' },
                                {value: newData.num_neg1, name: '预测错误' },
                            ],
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0,0,0,0.5)'
                                }
                            }
                        }
                    ]
                  };
                  pulsePredict_chart1.setOption(pulsePredict_option1);

                  var pulsePredict_bar1 = document.getElementById('lungPredictChartBar1');
                  var pulsePredict_chartBar1 = echarts.init(pulsePredict_bar1);
                  var pulsePredictBar_option1 = {
                    title: {
                      text: '肺气虚预测验证',
                      subtext: '验证详情',
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross',
                            label: {
                                backgroundColor: '#283b56'
                            }
                        },
                        formatter : function(params){
                          var a=params[0];
                          var b=params[1];
                          var str='编号：'+a.axisValue;
                          str += '<br /><span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+a.color+'"></span>' + a.seriesName + " : " + a.value + "<br />";
                          str += '<span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+b.color+'"></span>' + b.seriesName + " : " + b.value;
                          return str;
                        }
                    },
                    legend: {
                        data:['预测类别', '标签类别']
                    },
                    dataZoom: {
                        show: false,
                        start: 0,
                        end: 100
                    },
                    xAxis:
                    {
                      name:'被验证者编号',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: true,
                        data: newData.idSet
                    },
                    yAxis:
                    {
                      name:'肺气虚类型',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: false,
                        data: ['', '无肺气虚', '有肺气虚', '']
                    },
                    series: [
                        {
                            name: '标签类别',
                            type: 'line',
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            data: newData.labelType1
                        },
                        {
                            name: '预测类别',
                            type: 'line',
                            data: newData.predictType1
                        }
                    ]
                  };
                  pulsePredict_chartBar1.setOption(pulsePredictBar_option1);

                  var pulsePredictDisplay1=document.getElementById('lungPredictDisplay1');
                  pulsePredictDisplay1.innerHTML='<h2 class="layui-timeline-title"><b>预测准确率：'+newData.accuracy1*100.0+'%</b></h2>';

                  var pulsePredict_dom2 = document.getElementById('lungPredictChartDom2');
                  var pulsePredict_chart2 = echarts.init(pulsePredict_dom2);
                  var pulsePredict_option2={
                    title: {
                        text: '脾气虚预测验证情况分布',
                        subtext: newData.testNum+'个人的脾气虚验证',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item'
                    },
                    legend: {
                        orient: 'vertical',
                        left: 'left',
                    },
                    series: [
                        {
                            name: '预测准确率'+newData.accuracy2*100+'%',
                            type: 'pie',
                            radius: '60%',
                          label: {
                                normal: {
                                    position:"inner",
                                    show:false,
                                }
                            },
                            data: [
                                {value: newData.num_pos2, name: '预测正确' },
                                {value: newData.num_neg2, name: '预测错误' },
                            ],
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0,0,0,0.5)'
                                }
                            }
                        }
                    ]
                  };
                  pulsePredict_chart2.setOption(pulsePredict_option2);

                  var pulsePredict_bar2 = document.getElementById('lungPredictChartBar2');
                  var pulsePredict_chartBar2 = echarts.init(pulsePredict_bar2);
                  var pulsePredictBar_option2 = {
                    title: {
                      text: '脾气虚预测验证',
                      subtext: '验证详情',
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross',
                            label: {
                                backgroundColor: '#283b56'
                            }
                        },
                        formatter : function(params){
                          var a=params[0];
                          var b=params[1];
                          var str='编号：'+a.axisValue;
                          str += '<br /><span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+a.color+'"></span>' + a.seriesName + " : " + a.value + "<br />";
                          str += '<span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+b.color+'"></span>' + b.seriesName + " : " + b.value;
                          return str;
                        }
                    },
                    legend: {
                        data:['预测类别', '标签类别']
                    },
                    dataZoom: {
                        show: false,
                        start: 0,
                        end: 100
                    },
                    xAxis:
                    {
                      name:'被验证者编号',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: true,
                        data: newData.idSet
                    },
                    yAxis:
                    {
                      name:'肺气虚类型',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: false,
                        data: ['', '无脾气虚', '有脾气虚', '']
                    },
                    series: [
                        {
                            name: '标签类别',
                            type: 'line',
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            data: newData.labelType2
                        },
                        {
                            name: '预测类别',
                            type: 'line',
                            data: newData.predictType2
                        }
                    ]
                  };
                  pulsePredict_chartBar2.setOption(pulsePredictBar_option2);

                  var pulsePredictDisplay2=document.getElementById('lungPredictDisplay2');
                  pulsePredictDisplay2.innerHTML='<h2 class="layui-timeline-title"><b>预测准确率：'+newData.accuracy2*100.0+'%</b></h2>';

                  var pulsePredict_dom3 = document.getElementById('lungPredictChartDom3');
                  var pulsePredict_chart3 = echarts.init(pulsePredict_dom3);
                  var pulsePredict_option3={
                    title: {
                        text: '肾气虚预测验证情况分布',
                        subtext: newData.testNum+'个人的肾气虚验证',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item'
                    },
                    legend: {
                        orient: 'vertical',
                        left: 'left',
                    },
                    series: [
                        {
                            name: '预测准确率'+newData.accuracy3*100+'%',
                            type: 'pie',
                            radius: '60%',
                          label: {
                                normal: {
                                    position:"inner",
                                    show:false,
                                }
                            },
                            data: [
                                {value: newData.num_pos3, name: '预测正确' },
                                {value: newData.num_neg3, name: '预测错误' },
                            ],
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0,0,0,0.5)'
                                }
                            }
                        }
                    ]
                  };
                  pulsePredict_chart3.setOption(pulsePredict_option3);

                  var pulsePredict_bar3 = document.getElementById('lungPredictChartBar3');
                  var pulsePredict_chartBar3 = echarts.init(pulsePredict_bar3);
                  var pulsePredictBar_option3 = {
                    title: {
                      text: '肾气虚预测验证',
                      subtext: '验证详情',
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross',
                            label: {
                                backgroundColor: '#283b56'
                            }
                        },
                        formatter : function(params){
                          var a=params[0];
                          var b=params[1];
                          var str='编号：'+a.axisValue;
                          str += '<br /><span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+a.color+'"></span>' + a.seriesName + " : " + a.value + "<br />";
                          str += '<span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+b.color+'"></span>' + b.seriesName + " : " + b.value;
                          return str;
                        }
                    },
                    legend: {
                        data:['预测类别', '标签类别']
                    },
                    dataZoom: {
                        show: false,
                        start: 0,
                        end: 100
                    },
                    xAxis:
                    {
                      name:'被验证者编号',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: true,
                        data: newData.idSet
                    },
                    yAxis:
                    {
                      name:'肾气虚类型',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: false,
                        data: ['', '无肾气虚', '有肾气虚', '']
                    },
                    series: [
                        {
                            name: '标签类别',
                            type: 'line',
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            data: newData.labelType3
                        },
                        {
                            name: '预测类别',
                            type: 'line',
                            data: newData.predictType3
                        }
                    ]
                  };
                  pulsePredict_chartBar3.setOption(pulsePredictBar_option3);

                  var pulsePredictDisplay3=document.getElementById('lungPredictDisplay3');
                  pulsePredictDisplay3.innerHTML='<h2 class="layui-timeline-title"><b>预测准确率：'+newData.accuracy3*100.0+'%</b></h2>';
                },
                error: function () {
                  layer.msg('处理出错！', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
                }
            });
          }
       });

      //触发事件
      var active = {
        tabAdd: function(){
          //新增一个Tab项
          element.tabAdd('demo', {
            title: '新选项'+ (Math.random()*1000|0) //用于演示
            ,content: '内容'+ (Math.random()*1000|0)
            ,id: new Date().getTime() //实际使用一般是规定好的id，这里以时间戳模拟下
          })
        }
        ,tabDelete: function(othis){
          //删除指定Tab项
          element.tabDelete('demo', '44'); //删除：“商品管理”


          othis.addClass('layui-btn-disabled');
          console.log(222)
        }
        ,tabChange: function(){
          //切换到指定Tab项
          element.tabChange('demo', '22'); //切换到：用户管理
          console.log(55)
        }
      };

      $('.site-demo-active').on('click', function(){
        var othis = $(this), type = othis.data('type');
        active[type] ? active[type].call(this, othis) : '';
        console.log(1111)
      });

      //Hash地址的定位
      var layid = location.hash.replace(/^#test=/, '');
      element.tabChange('test', layid);

      element.on('tab(test)', function(elem){
        location.hash = 'test='+ $(this).attr('lay-id');
        console.log(1444)
      });

    });
    </script>
    <script>
    layui.use(['form', 'layedit', 'laydate'], function(){
      var form = layui.form
      ,layer = layui.layer
      ,layedit = layui.layedit
      ,laydate = layui.laydate;

      //日期
      laydate.render({
        elem: '#date'
      });
      laydate.render({
        elem: '#date1'
      });

      //创建一个编辑器
      var editIndex = layedit.build('LAY_demo_editor');

      //自定义验证规则
      form.verify({
        userAge: function(value){
          var re = /^[0-9]+.?[0-9]*$/;
          if(value==''){
            return '年龄不能为空！';
          }
          if (!re.test(value)){
            return '输入的年龄不是数字！';
          }
          if(value<=0||value>120){
            return '请输入正确的年龄！';
          }
        }
        ,pass: [
          /^[\S]{6,12}$/
          ,'密码必须6到12位，且不能出现空格'
        ]
        ,userBloodCreatinine: function(value){
          var re = /^[0-9]+.?[0-9]*$/;
          if (!re.test(value)){
            return '请输入正确的血肌酐指标值！';
          }
        }
        ,fileName: function (value){
          if(value.length <= 0)
            return '请先选择脉搏数据文件';
        }
      });

      //监听指定开关
      form.on('switch(switchTest)', function(data){
        layer.msg('开关checked：'+ (this.checked ? 'true' : 'false'), {
          offset: '6px'
        });
        layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)
      });

      //监听提交
      form.on('submit(forecastInformation)', function(data){
        var submitData = new FormData($("#form1")[0]);
        $.ajax({
            url: "disease_prediction",
            type: "POST",
            dataType : "json",
            processData: false,
            contentType:false,
            // data: $('#form1').serialize(),
            data:submitData,
            success: function (newData) {
              if(newData.fileRead=='success'){
                form.val('forecastInformation', {
                  "pulseType": newData.pulseType.toString()
                });
                layer.alert(newData.pulseType.toString(), {icon: 6,title:'脉象预测结果',time:5000,skin: 'layui-layer-lan',anim:4});
              }
              else if(newData.fileRead=='fail'){
                layer.msg('导入csv文件行列小于2560*57，或文件编码格式不是\'utf-16 le\'和\'utf-8\'', { icon: 7, time: 4000, shade: [0.6, '#000', true] });
              }
            },
            error: function () {
              layer.msg('处理出错！', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
            }
        });
        // layer.alert(JSON.stringify(data.field), {
        //   title: '最终的提交信息'
        // })
        // alert(data);
        return false;
      });

      //表单赋值
      layui.$('#LAY-component-form-setval').on('click', function(){
        form.val('example', {
          "username": "贤心" // "name": "value"
          ,"password": "123456"
          ,"interest": 1
          ,"like[write]": true //复选框选中状态
          ,"close": true //开关状态
          ,"sex": "女"
          ,"desc": "我爱 layui"
        });
      });

      //表单取值
      layui.$('#LAY-component-form-getval').on('click', function(){
        var data = form.val('example');
        alert(JSON.stringify(data));
      });

      //利用表单已填信息计算eGFR值
      layui.$('#LAY-component-form-egfr').on('click', function(){
        var data = form.val('forecastInformation');
        var jsonData = JSON.stringify(data);// 转成JSON格式
        //var result = $.parseJSON(jsonData);// 转成JSON对象
        var objectData = JSON.parse(jsonData);//转成JSON对象
        if(objectData.userage==""){
          layer.msg('请输入年龄用于计算！', { icon: 7, time: 1000, shade: [0.6, '#000', true] });
          return ;
        }
        var re = /^[0-9]+.?[0-9]*$/;//数字判断验证规则
        age=parseFloat(objectData.userage);
        if (age==NaN || !re.test(age)){
          layer.msg('输入的年龄非正常数字！', { icon: 7, time: 1000, shade: [0.6, '#000', true] });
          return ;
        }
        if(age<0||age>120){
          layer.msg('年龄超出正常范围！', { icon: 7, time: 1000, shade: [0.6, '#000', true] });
          return ;
        }
        if(objectData.bloodCreatinine==""){
          layer.msg('请输入血肌酐值用于计算！', { icon: 7, time: 1000, shade: [0.6, '#000', true] });
          return ;
        }
        bloodCreatinine=parseFloat(objectData.bloodCreatinine);
        if (bloodCreatinine==NaN || !re.test(bloodCreatinine)){
          layer.msg('请输入正确的血肌酐指标值！', { icon: 7, time: 1000, shade: [0.6, '#000', true] });
          return ;
        }
        var egfr = 0;
        if(objectData.sex.toString()=="男"){
          egfr=186*(objectData.bloodCreatinine/88.41)**-1.154*(objectData.userage**-0.203)*1.233;
        }
        else if(objectData.sex.toString()=="女"){
          egfr=186*(objectData.bloodCreatinine/88.41)**-1.154*0.742*(objectData.userage**-0.203)*1.233;
        }
        //alert(jsonData);
        //alert(objectData.userage);//获取某key的对应value
        //alert(JSON.stringify(data));
        //更新计算得到的结果
        form.val('forecastInformation', {
          // "sex": objectData.sex.toString() // "name": "value"
          // ,"userage": objectData.userage.toString()
          // ,"stage": objectData.stage.toString()
          // ,"bloodCreatinine": objectData.bloodCreatinine.toString(),
          "egfr": egfr.toString()
        });
      });
      // //layui框架渲染（否则下拉框不显示）
      // layui.use('form', function () {
      //     var form = layui.form;
      //     form.render();
      //     //更新数据
      //     var newData = {{newData | tojson}};//获取后端返回的结果
      //     objectData = JSON.parse(newData);
      //     //alert(objectData.pulseType.toString());
      //     //document.getElementById("pulseType").innerText = objectData.pulseType.toString();
      //     if(objectData.fileRead=='success'){
      //       form.val('forecastInformation', {
      //       "sex": objectData.sex.toString() // "name": "value"
      //       ,"userage": objectData.userage.toString()
      //       ,"stage": objectData.stage.toString()
      //       ,"bloodCreatinine": objectData.bloodCreatinine.toString()
      //       ,"egfr": objectData.egfr.toString()
      //       ,"fileName" : objectData.fileName.toString()
      //       ,"pulseType": objectData.pulseType.toString()
      //       });
      //     }
      //     else if(objectData.fileRead=='fail'){
      //       form.val('forecastInformation', {
      //       "sex": '男' // "name": "value"
      //       ,"userage": ''
      //       ,"stage": ''
      //       ,"bloodCreatinine": ''
      //       ,"egfr": ''
      //       ,"fileName" : ''
      //       ,"pulseType": ''
      //       });
      //       layer.msg('导入csv文件行列小于2560*57，或文件编码格式不是\'utf-16 le\'和\'utf-8\'', { icon: 7, time: 4000, shade: [0.6, '#000', true] });
      //     }
      // });
    });
    </script>
    <!--文件名展示框与文件上传按钮关联js-->
    <script>
    $(".file").on("change","input[type='file']",function(){
      var fileNameText=document.getElementById("selectFileName");
      var fileInput=document.getElementById("selectFile");
      fileNameText.value=fileInput.files[0].name;
      //alert(fileNameText.placeholder);
    })
    </script>
      <script>
        layui.use(['element', 'form'], function () {
          var $ = layui.jquery
          var element = layui.element;
          var form = layui.form;
          var layer = layui.layer;
          //脉波下拉框选择验证数据量
          form.on('select(selectNum)', function (data) {
            var postData={"selectTestNum": "50" };
            var message = data.value;
            if(message == "50"){
              postData={"selectTestNum": "50" };
            }
            else if (message == "100") {
              postData={"selectTestNum": "100" };
            } else if (message == "200") {
              postData={"selectTestNum": "200" };
            }
            layer.load(2);
            $.ajax({
                url: "pulsePrediction_accuracy",
                type: "POST",
                dataType : "json",
                // processData: false,
                // contentType:false,
                // data: $('#form1').serialize(),
                data: postData,
                success: function (newData) {
                  layer.closeAll('loading');
                  var pulsePredict_dom = document.getElementById('pulsePredictChartDom');
                  var pulsePredict_chart = echarts.init(pulsePredict_dom);
                  var pulsePredict_option={
                    title: {
                        text: '脉搏预测验证情况分布',
                        subtext: newData.testNum+'个脉搏验证表格',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item'
                    },
                    legend: {
                        orient: 'vertical',
                        left: 'left',
                    },
                    series: [
                        {
                            name: '预测准确率'+newData.accuracy*100+'%',
                            type: 'pie',
                            radius: '60%',
                          label: {
                                normal: {
                                    position:"inner",
                                    show:false,
                                }
                            },
                            data: [
                                {value: newData.num_pos, name: '预测正确' },
                                {value: newData.num_neg, name: '预测错误' },
                            ],
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0,0,0,0.5)'
                                }
                            }
                        }
                    ]
                  };
                  pulsePredict_chart.setOption(pulsePredict_option);

                  var pulsePredict_bar = document.getElementById('pulsePredictChartBar');
                  var pulsePredict_chartBar = echarts.init(pulsePredict_bar);
                  var pulsePredictBar_option = {
                    title: {
                      text: '脉搏预测验证',
                      subtext: '验证详情',
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross',
                            label: {
                                backgroundColor: '#283b56'
                            }
                        },
                        formatter : function(params){
                          var a=params[0];
                          var b=params[1];
                          var str='编号：'+a.axisValue;
                          str += '<br /><span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+a.color+'"></span>' + a.seriesName + " : " + a.value + "<br />";
                          str += '<span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+b.color+'"></span>' + b.seriesName + " : " + b.value;
                          return str;
                        }
                    },
                    legend: {
                        data:['预测类别', '标签类别']
                    },
                    dataZoom: {
                        show: false,
                        start: 0,
                        end: 100
                    },
                    xAxis:
                    {
                      name:'脉搏表格编号',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: true,
                        data: newData.idSet
                    },
                    yAxis:
                    {
                      name:'脉搏类型',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: false,
                        data: ['', '沉细', '细', '弦', '弦细', '滑', '濡']
                    },
                    series: [
                        {
                            name: '标签类别',
                            type: 'line',
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            data: newData.labelType
                        },
                        {
                            name: '预测类别',
                            type: 'line',
                            data: newData.predictType
                        }
                    ]
                  };
                  pulsePredict_chartBar.setOption(pulsePredictBar_option);
                  pulsePredictDisplay.innerHTML='<h2 class="layui-timeline-title"><b>预测准确率：'+newData.accuracy*100+'%</b></h2>';
                },
                error: function () {
                  layer.msg('处理出错！', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
                }
            });
          });
          //肾下拉框选择验证数据量
          form.on('select(selectKindneyNum)', function (data) {
            var postData={"selectTestNum": "50" };
            var message = data.value;
            if(message == "50"){
              postData={"selectTestNum": "50" };
            }
            else if (message == "100") {
              postData={"selectTestNum": "100" };
            } else if (message == "200") {
              postData={"selectTestNum": "200" };
            }
            layer.load(2);
            $.ajax({
                url: "kindneyPrediction_accuracy",
                type: "POST",
                dataType : "json",
                data: postData,
                success: function (newData) {
                  layer.closeAll('loading');
                  var pulsePredict_dom = document.getElementById('kindneyPredictChartDom');
                  var pulsePredict_chart = echarts.init(pulsePredict_dom);
                  var pulsePredict_option={
                    title: {
                        text: '肾象预测验证情况分布',
                        subtext: newData.testNum+'个人的肾象验证',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item'
                    },
                    legend: {
                        orient: 'vertical',
                        left: 'left',
                    },
                    series: [
                        {
                            name: '预测准确率'+newData.accuracy*100+'%',
                            type: 'pie',
                            radius: '60%',
                          label: {
                                normal: {
                                    position:"inner",
                                    show:false,
                                }
                            },
                            data: [
                                {value: newData.num_pos, name: '预测正确' },
                                {value: newData.num_neg, name: '预测错误' },
                            ],
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0,0,0,0.5)'
                                }
                            }
                        }
                    ]
                  };
                  pulsePredict_chart.setOption(pulsePredict_option);

                  var pulsePredict_bar = document.getElementById('kindneyPredictChartBar');
                  var pulsePredict_chartBar = echarts.init(pulsePredict_bar);
                  var pulsePredictBar_option = {
                    title: {
                      text: '肾象预测验证',
                      subtext: '验证详情',
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross',
                            label: {
                                backgroundColor: '#283b56'
                            }
                        },
                        formatter : function(params){
                          var a=params[0];
                          var b=params[1];
                          var str='编号：'+a.axisValue;
                          str += '<br /><span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+a.color+'"></span>' + a.seriesName + " : " + a.value + "<br />";
                          str += '<span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+b.color+'"></span>' + b.seriesName + " : " + b.value;
                          return str;
                        }
                    },
                    legend: {
                        data:['预测类别', '标签类别']
                    },
                    dataZoom: {
                        show: false,
                        start: 0,
                        end: 100
                    },
                    xAxis:
                    {
                      name:'被验证者编号',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: true,
                        data: newData.idSet
                    },
                    yAxis:
                    {
                      name:'肾象类型',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: false,
                        data: ['', '肾阳虚', '肾阴虚', '']
                    },
                    series: [
                        {
                            name: '标签类别',
                            type: 'line',
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            data: newData.labelType
                        },
                        {
                            name: '预测类别',
                            type: 'line',
                            data: newData.predictType
                        }
                    ]
                  };
                  pulsePredict_chartBar.setOption(pulsePredictBar_option);

                  var pulsePredictDisplay=document.getElementById('kindneyPredictDisplay');
                  pulsePredictDisplay.innerHTML='<h2 class="layui-timeline-title"><b>预测准确率：'+newData.accuracy*100+'%</b></h2>';
                },
                error: function () {
                  layer.msg('处理出错！', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
                }
            });
          });
          //肝下拉框选择验证数据量
          form.on('select(selectLiverNum)', function (data) {
            var postData={"selectTestNum": "50" };
            var message = data.value;
            if(message == "50"){
              postData={"selectTestNum": "50" };
            }
            else if (message == "100") {
              postData={"selectTestNum": "100" };
            } else if (message == "150") {
              postData={"selectTestNum": "150" };
            }
            layer.load(2);
            $.ajax({
                url: "liverPrediction_accuracy",
                type: "POST",
                dataType : "json",
                // processData: false,
                // contentType:false,
                data: postData,
                success: function (newData) {
                  layer.closeAll('loading');
                  var pulsePredict_dom = document.getElementById('liverPredictChartDom');
                  var pulsePredict_chart = echarts.init(pulsePredict_dom);
                  var pulsePredict_option={
                    title: {
                        text: '肝象预测验证情况分布',
                        subtext: newData.testNum+'个人的肝象验证',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item'
                    },
                    legend: {
                        orient: 'vertical',
                        left: 'left',
                    },
                    series: [
                        {
                            name: '预测准确率'+newData.accuracy*100+'%',
                            type: 'pie',
                            radius: '60%',
                          label: {
                                normal: {
                                    position:"inner",
                                    show:false,
                                }
                            },
                            data: [
                                {value: newData.num_pos, name: '预测正确' },
                                {value: newData.num_neg, name: '预测错误' },
                            ],
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0,0,0,0.5)'
                                }
                            }
                        }
                    ]
                  };
                  pulsePredict_chart.setOption(pulsePredict_option);

                  var pulsePredict_bar = document.getElementById('liverPredictChartBar');
                  var pulsePredict_chartBar = echarts.init(pulsePredict_bar);
                  var pulsePredictBar_option = {
                    title: {
                      text: '肝象预测验证',
                      subtext: '验证详情',
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross',
                            label: {
                                backgroundColor: '#283b56'
                            }
                        },
                        formatter : function(params){
                          var a=params[0];
                          var b=params[1];
                          var str='编号：'+a.axisValue;
                          str += '<br /><span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+a.color+'"></span>' + a.seriesName + " : " + a.value + "<br />";
                          str += '<span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+b.color+'"></span>' + b.seriesName + " : " + b.value;
                          return str;
                        }
                    },
                    legend: {
                        data:['预测类别', '标签类别']
                    },
                    dataZoom: {
                        show: false,
                        start: 0,
                        end: 100
                    },
                    xAxis:
                    {
                      name:'被验证者编号',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: true,
                        data: newData.idSet
                    },
                    yAxis:
                    {
                      name:'肝象类型',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: false,
                        data: ['', '肝胆湿热症', '肝郁脾虚症', '']
                    },
                    series: [
                        {
                            name: '标签类别',
                            type: 'line',
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            data: newData.labelType
                        },
                        {
                            name: '预测类别',
                            type: 'line',
                            data: newData.predictType
                        }
                    ]
                  };
                  pulsePredict_chartBar.setOption(pulsePredictBar_option);

                  var pulsePredictDisplay=document.getElementById('liverPredictDisplay');
                  pulsePredictDisplay.innerHTML='<h2 class="layui-timeline-title"><b>预测准确率：'+newData.accuracy*100.0+'%</b></h2>';
                },
                error: function () {
                  layer.msg('处理出错！', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
                }
            });
          });
          //肺下拉框选择验证数据量
          form.on('select(selectLungNum)', function (data) {
            var postData={"selectTestNum": "50" };
            var message = data.value;
            if(message == "50"){
              postData={"selectTestNum": "50" };
            }
            else if (message == "100") {
              postData={"selectTestNum": "100" };
            } else if (message == "200") {
              postData={"selectTestNum": "200" };
            }
            layer.load(2);
            $.ajax({
                url: "lungPrediction_accuracy",
                type: "POST",
                dataType : "json",
                // processData: false,
                // contentType:false,
                data: postData,
                success: function (newData) {
                  layer.closeAll('loading');
                  var pulsePredict_dom1 = document.getElementById('lungPredictChartDom1');
                  var pulsePredict_chart1 = echarts.init(pulsePredict_dom1);
                  var pulsePredict_option1={
                    title: {
                        text: '肺气虚预测验证情况分布',
                        subtext: newData.testNum+'个人的肺气虚验证',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item'
                    },
                    legend: {
                        orient: 'vertical',
                        left: 'left',
                    },
                    series: [
                        {
                            name: '预测准确率'+newData.accuracy1*100+'%',
                            type: 'pie',
                            radius: '60%',
                          label: {
                                normal: {
                                    position:"inner",
                                    show:false,
                                }
                            },
                            data: [
                                {value: newData.num_pos1, name: '预测正确' },
                                {value: newData.num_neg1, name: '预测错误' },
                            ],
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0,0,0,0.5)'
                                }
                            }
                        }
                    ]
                  };
                  pulsePredict_chart1.setOption(pulsePredict_option1);

                  var pulsePredict_bar1 = document.getElementById('lungPredictChartBar1');
                  var pulsePredict_chartBar1 = echarts.init(pulsePredict_bar1);
                  var pulsePredictBar_option1 = {
                    title: {
                      text: '肺气虚预测验证',
                      subtext: '验证详情',
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross',
                            label: {
                                backgroundColor: '#283b56'
                            }
                        },
                        formatter : function(params){
                          var a=params[0];
                          var b=params[1];
                          var str='编号：'+a.axisValue;
                          str += '<br /><span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+a.color+'"></span>' + a.seriesName + " : " + a.value + "<br />";
                          str += '<span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+b.color+'"></span>' + b.seriesName + " : " + b.value;
                          return str;
                        }
                    },
                    legend: {
                        data:['预测类别', '标签类别']
                    },
                    dataZoom: {
                        show: false,
                        start: 0,
                        end: 100
                    },
                    xAxis:
                    {
                      name:'被验证者编号',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: true,
                        data: newData.idSet
                    },
                    yAxis:
                    {
                      name:'肺气虚类型',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: false,
                        data: ['', '无肺气虚', '有肺气虚', '']
                    },
                    series: [
                        {
                            name: '标签类别',
                            type: 'line',
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            data: newData.labelType1
                        },
                        {
                            name: '预测类别',
                            type: 'line',
                            data: newData.predictType1
                        }
                    ]
                  };
                  pulsePredict_chartBar1.setOption(pulsePredictBar_option1);

                  var pulsePredictDisplay1=document.getElementById('lungPredictDisplay1');
                  pulsePredictDisplay1.innerHTML='<h2 class="layui-timeline-title"><b>预测准确率：'+newData.accuracy1*100.0+'%</b></h2>';

                  var pulsePredict_dom2 = document.getElementById('lungPredictChartDom2');
                  var pulsePredict_chart2 = echarts.init(pulsePredict_dom2);
                  var pulsePredict_option2={
                    title: {
                        text: '脾气虚预测验证情况分布',
                        subtext: newData.testNum+'个人的脾气虚验证',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item'
                    },
                    legend: {
                        orient: 'vertical',
                        left: 'left',
                    },
                    series: [
                        {
                            name: '预测准确率'+newData.accuracy2*100+'%',
                            type: 'pie',
                            radius: '60%',
                          label: {
                                normal: {
                                    position:"inner",
                                    show:false,
                                }
                            },
                            data: [
                                {value: newData.num_pos2, name: '预测正确' },
                                {value: newData.num_neg2, name: '预测错误' },
                            ],
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0,0,0,0.5)'
                                }
                            }
                        }
                    ]
                  };
                  pulsePredict_chart2.setOption(pulsePredict_option2);

                  var pulsePredict_bar2 = document.getElementById('lungPredictChartBar2');
                  var pulsePredict_chartBar2 = echarts.init(pulsePredict_bar2);
                  var pulsePredictBar_option2 = {
                    title: {
                      text: '脾气虚预测验证',
                      subtext: '验证详情',
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross',
                            label: {
                                backgroundColor: '#283b56'
                            }
                        },
                        formatter : function(params){
                          var a=params[0];
                          var b=params[1];
                          var str='编号：'+a.axisValue;
                          str += '<br /><span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+a.color+'"></span>' + a.seriesName + " : " + a.value + "<br />";
                          str += '<span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+b.color+'"></span>' + b.seriesName + " : " + b.value;
                          return str;
                        }
                    },
                    legend: {
                        data:['预测类别', '标签类别']
                    },
                    dataZoom: {
                        show: false,
                        start: 0,
                        end: 100
                    },
                    xAxis:
                    {
                      name:'被验证者编号',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: true,
                        data: newData.idSet
                    },
                    yAxis:
                    {
                      name:'肺气虚类型',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: false,
                        data: ['', '无脾气虚', '有脾气虚', '']
                    },
                    series: [
                        {
                            name: '标签类别',
                            type: 'line',
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            data: newData.labelType2
                        },
                        {
                            name: '预测类别',
                            type: 'line',
                            data: newData.predictType2
                        }
                    ]
                  };
                  pulsePredict_chartBar2.setOption(pulsePredictBar_option2);

                  var pulsePredictDisplay2=document.getElementById('lungPredictDisplay2');
                  pulsePredictDisplay2.innerHTML='<h2 class="layui-timeline-title"><b>预测准确率：'+newData.accuracy2*100.0+'%</b></h2>';

                  var pulsePredict_dom3 = document.getElementById('lungPredictChartDom3');
                  var pulsePredict_chart3 = echarts.init(pulsePredict_dom3);
                  var pulsePredict_option3={
                    title: {
                        text: '肾气虚预测验证情况分布',
                        subtext: newData.testNum+'个人的肾气虚验证',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item'
                    },
                    legend: {
                        orient: 'vertical',
                        left: 'left',
                    },
                    series: [
                        {
                            name: '预测准确率'+newData.accuracy3*100+'%',
                            type: 'pie',
                            radius: '60%',
                          label: {
                                normal: {
                                    position:"inner",
                                    show:false,
                                }
                            },
                            data: [
                                {value: newData.num_pos3, name: '预测正确' },
                                {value: newData.num_neg3, name: '预测错误' },
                            ],
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0,0,0,0.5)'
                                }
                            }
                        }
                    ]
                  };
                  pulsePredict_chart3.setOption(pulsePredict_option3);

                  var pulsePredict_bar3 = document.getElementById('lungPredictChartBar3');
                  var pulsePredict_chartBar3 = echarts.init(pulsePredict_bar3);
                  var pulsePredictBar_option3 = {
                    title: {
                      text: '肾气虚预测验证',
                      subtext: '验证详情',
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross',
                            label: {
                                backgroundColor: '#283b56'
                            }
                        },
                        formatter : function(params){
                          var a=params[0];
                          var b=params[1];
                          var str='编号：'+a.axisValue;
                          str += '<br /><span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+a.color+'"></span>' + a.seriesName + " : " + a.value + "<br />";
                          str += '<span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:'+b.color+'"></span>' + b.seriesName + " : " + b.value;
                          return str;
                        }
                    },
                    legend: {
                        data:['预测类别', '标签类别']
                    },
                    dataZoom: {
                        show: false,
                        start: 0,
                        end: 100
                    },
                    xAxis:
                    {
                      name:'被验证者编号',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: true,
                        data: newData.idSet
                    },
                    yAxis:
                    {
                      name:'肾气虚类型',
                      nameLocation:'end',
                        type: 'category',
                        boundaryGap: false,
                        data: ['', '无肾气虚', '有肾气虚', '']
                    },
                    series: [
                        {
                            name: '标签类别',
                            type: 'line',
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            data: newData.labelType3
                        },
                        {
                            name: '预测类别',
                            type: 'line',
                            data: newData.predictType3
                        }
                    ]
                  };
                  pulsePredict_chartBar3.setOption(pulsePredictBar_option3);

                  var pulsePredictDisplay3=document.getElementById('lungPredictDisplay3');
                  pulsePredictDisplay3.innerHTML='<h2 class="layui-timeline-title"><b>预测准确率：'+newData.accuracy3*100.0+'%</b></h2>';
                },
                error: function () {
                  layer.msg('处理出错！', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
                }
            });
          });
        });
      </script>
    <!--肾象预测子页面js-->
    <script>
    layui.use(['form', 'layedit', 'laydate'], function(){
      var form = layui.form
      ,layer = layui.layer
      ,layedit = layui.layedit
      ,laydate = layui.laydate;
      //监听提交
      form.on('submit(forecastInformation3)', function(data){
        var submitData = new FormData($("#form3")[0]);
        $.ajax({
            url: "kindney_prediction",
            type: "POST",
            dataType : "json",
            processData: false,
            contentType:false,
            // data: $('#form1').serialize(),
            data:submitData,
            success: function (newData) {
              if(newData.execute=='success'){
                form.val('forecastInformation3', {
                  "kindneyType": newData.kindneyType.toString()
                });
                layer.alert(newData.kindneyType.toString(), {icon: 6,title:'肾象预测结果',time:5000,skin: 'layui-layer-lan',anim:4});
              }
              else if(newData.execute=='fail'){
                layer.msg('处理出错', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
              }
            },
            error: function () {
              layer.msg('处理出错！', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
            }
        });
        return false;
      });
      //利用表单已填信息计算eGFR值
      layui.$('#LAY-component-form-egfr3').on('click', function(){
        var data = form.val('forecastInformation3');
        var jsonData = JSON.stringify(data);// 转成JSON格式
        //var result = $.parseJSON(jsonData);// 转成JSON对象
        var objectData = JSON.parse(jsonData);//转成JSON对象
        if(objectData.userage==""){
          layer.msg('请输入年龄用于计算！', { icon: 7, time: 1000, shade: [0.6, '#000', true] });
          return ;
        }
        var re = /^[0-9]+.?[0-9]*$/;//数字判断验证规则
        age=parseFloat(objectData.userage);
        if (age==NaN || !re.test(age)){
          layer.msg('输入的年龄非正常数字！', { icon: 7, time: 1000, shade: [0.6, '#000', true] });
          return ;
        }
        if(age<0||age>120){
          layer.msg('年龄超出正常范围！', { icon: 7, time: 1000, shade: [0.6, '#000', true] });
          return ;
        }
        if(objectData.bloodCreatinine==""){
          layer.msg('请输入血肌酐值用于计算！', { icon: 7, time: 1000, shade: [0.6, '#000', true] });
          return ;
        }
        bloodCreatinine=parseFloat(objectData.bloodCreatinine);
        if (bloodCreatinine==NaN || !re.test(bloodCreatinine)){
          layer.msg('请输入正确的血肌酐指标值！', { icon: 7, time: 1000, shade: [0.6, '#000', true] });
          return ;
        }
        var egfr = 0;
        if(objectData.sex.toString()=="男"){
          egfr=186*(objectData.bloodCreatinine/88.41)**-1.154*(objectData.userage**-0.203)*1.233;
        }
        else if(objectData.sex.toString()=="女"){
          egfr=186*(objectData.bloodCreatinine/88.41)**-1.154*0.742*(objectData.userage**-0.203)*1.233;
        }
        //更新计算得到的结果
        form.val('forecastInformation3', {
          "egfr": egfr.toString()
        });
      });
    });
    </script>
    <!--肝象预测子页面js-->
    <script>
    layui.use(['form', 'layedit', 'laydate'], function(){
      var form = layui.form
      ,layer = layui.layer
      ,layedit = layui.layedit
      ,laydate = layui.laydate;
      //自定义验证规则
      form.verify({
        verify_alt: function(value){
          var re = /^[0-9]+.?[0-9]*$/;
          if (!re.test(value)){
            return '请输入正确的ALT指标值！';
          }
        }
      });
      //监听提交
      form.on('submit(forecastInformation4)', function(data){
        var submitData = new FormData($("#form4")[0]);
        $.ajax({
            url: "liver_prediction",
            type: "POST",
            dataType : "json",
            processData: false,
            contentType:false,
            // data: $('#form1').serialize(),
            data:submitData,
            success: function (newData) {
              if(newData.execute=='success'){
                form.val('forecastInformation4', {
                  "liverType": newData.liverType.toString()
                });
                layer.alert(newData.liverType.toString(), {icon: 6,title:'肝象预测结果',time:5000,skin: 'layui-layer-lan',anim:4});
              }
              else if(newData.execute=='fail'){
                layer.msg('处理出错', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
              }
            },
            error: function () {
              layer.msg('处理出错！', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
            }
        });
        return false;
      });
    });
    </script>
    <!--肺象预测子页面js-->
    <script>
    layui.use(['form', 'layedit', 'laydate'], function(){
      var form = layui.form
      ,layer = layui.layer
      ,layedit = layui.layedit
      ,laydate = layui.laydate;
      //自定义验证规则
      form.verify({
        verify_number: function(value){
          var re = /^[0-9]+.?[0-9]*$/;
          if (!re.test(value)){
            return '请输入正确的数值指标！';
          }
        }
      });
      //监听提交
      form.on('submit(forecastInformation5)', function(data){
        var submitData = new FormData($("#form5")[0]);
        $.ajax({
            url: "lung_prediction",
            type: "POST",
            dataType : "json",
            processData: false,
            contentType:false,
            // data: $('#form1').serialize(),
            data:submitData,
            success: function (newData) {
              if(newData.execute=='success'){
                form.val('forecastInformation5', {
                  "lungType": newData.lungType.toString()
                });
                layer.alert(newData.lungType.toString(), {icon: 6,title:'肺象预测结果',time:5000,skin: 'layui-layer-lan',anim:4});
              }
              else if(newData.execute=='fail'){
                layer.msg('处理出错', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
              }
            },
            error: function () {
              layer.msg('处理出错！', { icon: 7, time: 2000, shade: [0.6, '#000', true] });
            }
        });
        return false;
      });
    });
    </script>
  </body>
</html>